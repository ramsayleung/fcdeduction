* fcdeduction
  a typical deduction system(一个典型的扣费系统设计与实现)
** 背景
*** 应用命名
    应用命名为 =fcdeduction=, 按照惯例, =fc= 指代对应的租户(=fc= 为 financial cloud, 意为金融云), =deduction= 指扣费系统.
*** 业务背景
    目前支付业务在对外输出的场景中, 为了提高业务体验, 会为客户提供对应扣费服务, 如摩拜的免密支付, 公共交通的免密支付服务等, 原来的扣费服务耦合在支付业务中, 业务能力边界不清晰, 因此现在将扣费服务从原来支付业务中剥离, 新增扣费服务平台, 负责管理相关的扣费服务.
*** 名词解释
    | 涉及名词   | 英文简称 | 详细说明                                                                                                                                                     |
    | 单设备登录 |          | 同一用户在同一时刻只能在一个设备上保持登录态                                                                                                                 |
    | 产品码     |          | 每个服务都是对应的产品, 每个产品都有对应的产品码                                                                                                             |
    | 扣费合约   |          | 每个产品和每个用户都是独立存在的, 通过合约将用户与对应的产品服务建立关联, 扣费合约指代的是建立该关联的目的是作扣费之用, 类似的合约还有收单合约, 绑卡合约等等 |
*** 功能拆分
    后端服务:
    
    | 功能点           | 对应开发 | 开发时间 | 自测时间 |
    | 单设备登录       | Ramsay   |       2D |       1D |
    | 开通扣费服务     | Ramsay   |       2D |       1D |
    | 关闭扣费服务     | Ramsay   |       2D |       1D |
    | 查看扣费服务列表 | Ramsay   |       2D |       1D |

    前端页面:
    | 对应页面         | 对应开发 | 开发时间 | 自测时间 |
    | 登录页面         | Ramsay   |       1D |       1D |
    | 开通扣费服务     | Ramsay   |       1D |       1D |
    | 关闭扣费服务     | Ramsay   |       1D |       1D |
    | 查看扣费服务列表 | Ramsay   |       1D |       1D |

** 系统分析
*** 总体设计
**** 上下游系统依赖关系图:

     [[file:images/%E4%B8%8A%E4%B8%8B%E9%81%8A%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E5%9B%BE.jpg]]
**** 用例图:

     [[file:images/%E7%94%A8%E4%BE%8B%E5%9B%BE.jpg]]

     蓝色: 本期实现
     灰色: 本期不实现
     绿色: 已有功能, 不涉及修改(本期为新增应用, 不涉及原有功能)
     绿色: 已有功能, 涉及修改(本期为新增应用, 不涉及原有功能)
**** 模型:
     (其中的合约中心, 用户中心, 产品中心都在本次系分中以单表代替, 实际上中台提供的能力会复杂很多)
    
     [[file:images/%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B.jpg]]
*** 功能设计
** 测试分析
** 发布计划
** 参考资料
   [[file:PRD-%E6%89%A3%E8%B4%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.md][PRD-扣费管理中心]]
